<wpfCoreWindow:MetroWindowExt
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:Convertidores="clr-namespace:WPFCore.Convertidores;assembly=WPFCore"
    xmlns:convertidoresLocal="clr-namespace:ComercialColindres.Convertidores"
    xmlns:Custom="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:HelpersMahApps="http://metro.mahapps.com/winfx/xaml/controls"
    xmlns:controlsMahApps="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    xmlns:Comportamientos="clr-namespace:WPFCore.Comportamientos;assembly=WPFCore"
    xmlns:misControles="clr-namespace:MisControlesWPF;assembly=MisControlesWPF"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:wpfCoreWindow="clr-namespace:WPFCore.UtilidadesWindows;assembly=WPFCore"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="ComercialColindres.Windows.OrdenesCompraProductoWindow"
    Title="Ordenes de Compra de Productos BIOMASA"
    Width="920"
    Height="600"
    MostrarDialogo="{Binding DialogSettings, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    SaveWindowPosition="True"
    ShowFlyout="{Binding SlidePanelIndice, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
    WindowStartupLocation="CenterScreen">

    <wpfCoreWindow:MetroWindowExt.Resources>
        <Convertidores:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <Convertidores:BoolToStringConverter x:Key="BoolToStringConverter" />
        <Convertidores:StateValueToColorConverter x:Key="StateValueToColorConverter" />
        <Convertidores:DateTimeToShortString x:Key="DateTimeToShortString" />
        <convertidoresLocal:EstadoColorConvert x:Key="EstadoColorConvert" />
    </wpfCoreWindow:MetroWindowExt.Resources>

    <wpfCoreWindow:MetroWindowExt.DataContext>
        <Binding Path="OrdenesCompraProductoViewModel" Source="{StaticResource Locator}"/>
    </wpfCoreWindow:MetroWindowExt.DataContext>

    <wpfCoreWindow:MetroWindowExt.Flyouts>
        <controlsMahApps:FlyoutsControl>
            <controlsMahApps:Flyout x:Name="CrearPOBIomasaFlyout"
                Width="400"                
                Margin="100,0,0,0"
                Header="Crear PO Biomasa"
                IsModal="True"
                Position="Right"
                Theme="Adapt">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="70" />
                    </Grid.RowDefinitions>
                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                        <StackPanel Orientation="Vertical">
                            <misControles:HeaderTextBlock Text="Planta" />
                            <misControles:InputTextBoxAutoCompleteControl
                                    AutoCompletionList="{Binding ListaPlantasAutoComplete}"       
                                    Buscar="{Binding ComandoBuscarPlantas}"
                                    SelectedItem="{Binding PlantaAutoCompleteSeleccionada, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            <misControles:HeaderTextBlock Text="# Orden de Compra Producto" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.OrdenCompraNo}" />
                            <misControles:HeaderTextBlock Text="# Exoneración DEI" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.NoExoneracionDEI}" />
                            <misControles:HeaderTextBlock Text="Fecha de Creación" />
                            <DatePicker Margin="5" SelectedDate="{Binding DatoOrdenCompraProducto.FechaCreacion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            <misControles:HeaderTextBlock Text="Creado Por" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.CreadoPor}" />
                            <misControles:HeaderTextBlock Text="$ Total" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.MontoDollar, StringFormat=N2}" 
                                                       FontWeight="SemiBold"
                                                       Comportamientos:TextBoxMaskBehavior.MaximumValue="18">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="LostFocus">
                                        <i:InvokeCommandAction Command="{Binding ComandoCalcularTotalLpsPO}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </misControles:InputTextBox>
                            <misControles:HeaderTextBlock Text="Lps Total" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.MontoLPS, StringFormat=N2}"
                                                       Comportamientos:TextBoxMaskBehavior.MaximumValue="18">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="LostFocus">
                                        <i:InvokeCommandAction Command="{Binding ComandoCalcularConversionDollarPO}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </misControles:InputTextBox>
                            <misControles:BodyTextBlock Text="Tasa de Cambio" />
                            <misControles:BodyTextBlock Text="{Binding DatoOrdenCompraProducto.ConversionDollarToLps, StringFormat=N10}" 
                                                        FontWeight="SemiBold">                                
                            </misControles:BodyTextBlock>                                                     
                        </StackPanel>
                    </ScrollViewer>
                    <misControles:AppBarPanel Grid.Row="1" Background="{DynamicResource AccentColorBrush}">
                        <misControles:AppBarButton
                            Command="{Binding ComandoCrear}"
                            Imagen="{DynamicResource GuardarPathImagen}"
                            Titulo="Guardar" />
                    </misControles:AppBarPanel>
                    <Border Grid.RowSpan="2" Visibility="{Binding MostrarVentanaEspera}">
                        <Grid>
                            <misControles:BloqueoPanel/>
                            <controlsMahApps:ProgressRing IsActive="True" IsLarge="False"/>
                        </Grid>
                    </Border>
                </Grid>
            </controlsMahApps:Flyout>
            <controlsMahApps:Flyout x:Name="EditarPOBIomasaFlyout"
                Width="400"                
                Margin="100,0,0,0"
                Header="Editar PO Biomasa"
                IsModal="True"
                Position="Right"
                Theme="Adapt">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="70" />
                    </Grid.RowDefinitions>
                    <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                        <StackPanel Orientation="Vertical">
                            <misControles:HeaderTextBlock Text="Planta" />
                            <misControles:BodyTextBlock Text="{Binding DatoOrdenCompraProducto.NombrePlanta}" />
                            <misControles:HeaderTextBlock Text="# Orden de Compra Producto" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.OrdenCompraNo}" />
                            <misControles:HeaderTextBlock Text="# Exoneración DEI" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.NoExoneracionDEI}" />
                            <misControles:HeaderTextBlock Text="Fecha de Creación" />
                            <DatePicker Margin="5" SelectedDate="{Binding DatoOrdenCompraProducto.FechaCreacion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            <misControles:HeaderTextBlock Text="Creado Por" />
                            <misControles:BodyTextBlock Text="{Binding DatoOrdenCompraProducto.CreadoPor}" />
                            <misControles:HeaderTextBlock Text="$ Total" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.MontoDollar, StringFormat=N2}" 
                                                       FontWeight="SemiBold"
                                                       Comportamientos:TextBoxMaskBehavior.MaximumValue="18">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="LostFocus">
                                        <i:InvokeCommandAction Command="{Binding ComandoCalcularTotalLpsPO}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </misControles:InputTextBox>
                            <misControles:HeaderTextBlock Text="Tasa de Cambio" />
                            <misControles:InputTextBox Text="{Binding DatoOrdenCompraProducto.ConversionDollarToLps, StringFormat=N4}" 
                                                       FontWeight="SemiBold"
                                                       Comportamientos:TextBoxMaskBehavior.MaximumValue="18">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="LostFocus">
                                        <i:InvokeCommandAction Command="{Binding ComandoCalcularTotalLpsPO}" />
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                            </misControles:InputTextBox>
                            <misControles:HeaderTextBlock Text="Lps Total" />
                            <misControles:BodyTextBlock Text="{Binding DatoOrdenCompraProducto.MontoLPS, StringFormat=N2}" />
                        </StackPanel>
                    </ScrollViewer>
                    <misControles:AppBarPanel Grid.Row="1" Background="{DynamicResource AccentColorBrush}">
                        <misControles:AppBarButton
                            Command="{Binding ComandoEditar}"
                            Imagen="{DynamicResource GuardarPathImagen}"
                            Titulo="Guardar" />
                    </misControles:AppBarPanel>
                    <Border Grid.RowSpan="2" Visibility="{Binding MostrarVentanaEspera}">
                        <Grid>
                            <misControles:BloqueoPanel/>
                            <controlsMahApps:ProgressRing IsActive="True" IsLarge="False"/>
                        </Grid>
                    </Border>
                </Grid>
            </controlsMahApps:Flyout>
            <controlsMahApps:Flyout x:Name="PODetalleBiomasaFlyout"
                Width="650"
                Margin="100,0,0,0"
                Header="PO Detalle BIOMASA"
                IsModal="True"
                Position="Right"
                Theme="Adapt">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="70" />
                    </Grid.RowDefinitions>
                    <Grid Grid.Row="0">
                        <GroupBox Header="DATOS DE ORDEN COMPRA BIOMASA">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width= "*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" MinHeight="30" />
                                        <RowDefinition Height="Auto" MinHeight="30" />
                                    </Grid.RowDefinitions>
                                    <misControles:HeaderTextBlock Grid.Column="0" Text="Planta" />
                                    <misControles:BodyTextBlock Grid.Row="1" Grid.Column="0" 
                                                                Text="{Binding OrdenCompraProductoSeleccionada.NombrePlanta, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <misControles:HeaderTextBlock Grid.Column="1" Text="# PO Biomasa" />
                                    <misControles:BodyTextBlock Grid.Row="1" Grid.Column="1" 
                                                                Text="{Binding OrdenCompraProductoSeleccionada.OrdenCompraNo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    <misControles:HeaderTextBlock
                                        Grid.Row="0"
                                        Grid.Column="2"
                                        Text="Tasa Cambio" />
                                    <misControles:BodyTextBlock Grid.Row="1" Grid.Column="2" 
                                                                FontSize="12"
                                                                FontWeight="Bold"
                                                                Text="{Binding OrdenCompraProductoSeleccionada.ConversionDollarToLps,
                                                                Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N4}" />
                                    <misControles:HeaderTextBlock
                                        Grid.Row="0"
                                        Grid.Column="3"
                                        Text="Total $" />
                                    <misControles:BodyTextBlock Grid.Row="1" Grid.Column="3" 
                                                                FontSize="12"
                                                                FontWeight="Bold"
                                                                Text="{Binding OrdenCompraProductoSeleccionada.MontoDollar,
                                                                Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" />
                                    <misControles:HeaderTextBlock
                                        Grid.Row="0"
                                        Grid.Column="4"
                                        Text="Total Lps" />
                                    <misControles:BodyTextBlock Grid.Row="1" Grid.Column="4" 
                                                                FontSize="12"
                                                                FontWeight="Bold"
                                                                Text="{Binding OrdenCompraProductoSeleccionada.MontoLPS,
                                                                Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" />
                                </Grid>
                            </Grid>
                        </GroupBox>
                    </Grid>
                    <Grid Grid.Row="1">
                        <GroupBox Header="DETALLE DEL REQUERIMIENTO BIOMASA">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <Grid Grid.Row="0">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width= "*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="40"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" MinHeight="30" />
                                        <RowDefinition Height="Auto" MinHeight="30" />
                                    </Grid.RowDefinitions>
                                    <misControles:HeaderTextBlock Grid.Column="0" Text="Categoria Biomasa" />
                                    <ComboBox
                                        Margin="5"
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        ItemsSource="{Binding ListaMaestroBiomasa}"
                                        DisplayMemberPath="Descripcion"                                        
                                        SelectedItem="{Binding MaestroBiomasaSeleccionado, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        SelectedValue="{Binding DatoPODetalleModel.BiomasaId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                        SelectedValuePath="BiomasaId"/>
                                    <misControles:HeaderTextBlock Grid.Column="1" Text="Toneladas"/>
                                    <misControles:InputTextBox Grid.Row="1" Grid.Column="1"
                                                               FontSize="12"
                                                               FontWeight="Bold"
                                                               Text="{Binding DatoPODetalleModel.Toneladas, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}"
                                                               Comportamientos:TextBoxMaskBehavior.MaximumValue="18"/>
                                    <misControles:HeaderTextBlock Grid.Column="2" Text="$ Precio/Tonelada"/>
                                    <misControles:InputTextBox Grid.Row="1" Grid.Column="2"
                                                               FontSize="12"
                                                               FontWeight="Bold"
                                                               Text="{Binding DatoPODetalleModel.PrecioDollar, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}"
                                                               Comportamientos:TextBoxMaskBehavior.MaximumValue="18">
                                        <i:Interaction.Triggers>
                                            <i:EventTrigger EventName="LostFocus">
                                                <i:InvokeCommandAction Command="{Binding ComandoCalcularTotalLpsDetallePO}" />
                                            </i:EventTrigger>
                                        </i:Interaction.Triggers>
                                    </misControles:InputTextBox>
                                    <misControles:HeaderTextBlock Grid.Column="3" Text="Lps Precio/Tonelada" />
                                    <misControles:BodyTextBlock Grid.Row="1" Grid.Column="3" 
                                                               Text="{Binding DatoPODetalleModel.PrecioLPS,
                                                               Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N4}"/>
                                    <misControles:OnlyImageAutoSizeButton
                                        Grid.Row="1"
                                        Grid.Column="4"
                                        Width="21"
                                        Height="21"
                                        Margin="5"
                                        HorizontalAlignment="Left"
                                        Background="{DynamicResource AccentColorBrush}"
                                        Command="{Binding ComandoAgregarDetallePO}"
                                        Imagen="{DynamicResource AgregarPathImagen}" />
                                </Grid>
                                <Grid Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <DataGrid                                    
                                Margin="5"
                                AutoGenerateColumns="False"
                                CanUserAddRows="False"
                                CanUserDeleteRows="False"
                                IsReadOnly="True"                                        
                                ItemsSource="{Binding ListaPODetalleModel, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                SelectedItem="{Binding PODetalleSeleccionado, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn Width="55">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <misControles:OnlyImageAutoSizeButton
                                                        Width="21"
                                                        Height="21"
                                                        Margin="2"
                                                        Background="{DynamicResource AccentColorBrush}"
                                                        Command="{Binding OrdenesCompraProductoViewModel.ComandoRemoverDetallePO, Source={StaticResource Locator}}"
                                                        Imagen="{DynamicResource QuitarPathImagen}" />
                                                            <misControles:OnlyImageAutoSizeButton
                                                        Width="21"
                                                        Height="21"
                                                        Margin="2"
                                                        Background="{DynamicResource AccentColorBrush}"
                                                        Command="{Binding OrdenesCompraProductoViewModel.ComandoEditarDetallePO, Source={StaticResource Locator}}"
                                                        Imagen="{DynamicResource EditarPathImagen}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn Binding="{Binding MaestroBiomasaDescripcion}" Header="Categoría Biomasa" />
                                            <DataGridTextColumn Binding="{Binding Toneladas, StringFormat=N2}" Header="Toneladas" />
                                            <DataGridTextColumn Binding="{Binding PrecioDollar, StringFormat=N2}" Header="Precio $" />
                                            <DataGridTextColumn Binding="{Binding PrecioLPS, StringFormat=N4}" Header="Precio Lps" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <Grid Grid.Row="1" HorizontalAlignment="Right">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="130" />
                                        </Grid.ColumnDefinitions>
                                        <misControles:HeaderTextBlock Grid.Row="0"
                                                                  FontSize="16"
                                                                  Text="Total $"/>
                                        <misControles:BodyTextBlock Grid.Row="0"
                                                                Grid.Column="1"
                                                                FontSize="16"
                                                                Text="{Binding DatoPODetalleModel.TotalDollares,
                                                                               Mode=TwoWay,
                                                                               UpdateSourceTrigger=PropertyChanged,
                                                                               StringFormat=N2}"
                                                                TextAlignment="Right" />
                                        <misControles:HeaderTextBlock Grid.Row="1"
                                                                  FontSize="16"
                                                                  Text="Total Lps"/>
                                        <misControles:BodyTextBlock Grid.Row="1"
                                                                Grid.Column="1"
                                                                FontSize="16"
                                                                Text="{Binding DatoPODetalleModel.TotalLps,
                                                                               Mode=TwoWay,
                                                                               UpdateSourceTrigger=PropertyChanged,
                                                                               StringFormat=N4}"
                                                                TextAlignment="Right" />
                                    </Grid>
                                </Grid>
                            </Grid>
                        </GroupBox>
                    </Grid>
                    <misControles:AppBarPanel Grid.Row="2" Background="{DynamicResource AccentColorBrush}">
                        <misControles:AppBarButton
                            Command="{Binding ComandoGuardarPODetalleBiomasa}"
                            Imagen="{DynamicResource GuardarPathImagen}"
                            Titulo="Guardar" />
                    </misControles:AppBarPanel>
                    <Border Grid.RowSpan="2" Visibility="{Binding MostrarVentanaEspera}">
                        <Grid>
                            <misControles:BloqueoPanel/>
                            <controlsMahApps:ProgressRing IsActive="True" IsLarge="False"/>
                        </Grid>
                    </Border>
                </Grid>
            </controlsMahApps:Flyout>
        </controlsMahApps:FlyoutsControl>
    </wpfCoreWindow:MetroWindowExt.Flyouts>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="70" />
        </Grid.RowDefinitions>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="275" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <GroupBox Header="Busqueda Ordenes de Compras">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="400*" />
                        <RowDefinition Height="33*" />
                    </Grid.RowDefinitions>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <misControles:TitleTextBlock Text="Buscar" />
                        <misControles:SearchTextBox
							Grid.Row="1"
							Buscar="{Binding ComandoBuscar}"
							SpellCheck.IsEnabled="True"
							Text="{Binding ValorBusquedaOrdenCompraProducto, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </Grid>
                    <ListBox
                        Grid.Row="1"
                        Margin="5"
                        IsSynchronizedWithCurrentItem="True"
                        ItemsSource="{Binding BusquedaOrdenesCompraProductoControl.Items}"
                        SelectedItem="{Binding OrdenCompraProductoSeleccionada, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Viewbox Margin="2">
                                        <Grid Width="25">
                                            <Path
                                                Fill="{Binding Estado, Converter={StaticResource StateValueToColorConverter}}"
                                                Data="M7.6999989,22.999995C6.7999992,22.999995 5.999999,23.699995 5.999999,24.699995 5.999999,25.599995 6.6999989,26.399995 7.6999989,26.399995 8.5999994,26.399995 9.3999996,25.699995 9.3999996,24.699995 9.3999996,23.699995 8.5999994,22.999995 7.6999989,22.999995z M7.6999989,20.299996C10.099999,20.299996 12.099999,22.299995 12.099999,24.699995 12.099999,27.099995 10.099999,29.099994 7.6999989,29.099994 5.2999992,29.099994 3.2999992,27.099995 3.2999992,24.699995 3.2999992,22.199996 5.2999992,20.299996 7.6999989,20.299996z M29.199999,9.9999981L31.999999,20.099996 17.099999,24.099995 14.299999,14.399997z M22.999999,2.0999994L25.599999,9.1999979 13.699999,12.799997 11.599999,5.499999z M1.1999989,0L5.8999996,0C6.2999992,0,6.6999989,0.30000019,6.8999996,0.59999943L6.8999996,0.69999981 8.999999,0.69999981 15.599999,26.599995 25.299999,23.699995 25.699999,25.099995 14.599999,28.399994 7.999999,2.0999994 6.5999994,2.0999994C6.3999996,2.2999992,6.1999989,2.3999996,5.8999996,2.3999996L1.1999989,2.3999996C0.5,2.3999996 0,1.7999992 0,1.1999998 0,0.5 0.5,0 1.1999989,0z"
                                                RenderTransformOrigin="0.5,0.5"
                                                Stretch="Uniform" />
                                        </Grid>
                                    </Viewbox>
                                    <StackPanel
                                        Width="185"
                                        Margin="5"
                                        Orientation="Vertical">
                                        <TextBlock
                                            Margin="1"
                                            HorizontalAlignment="Stretch"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Text="{Binding OrdenCompraNo}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            Margin="1"
                                            HorizontalAlignment="Stretch"
                                            FontSize="10"
                                            Text="{Binding NombrePlanta}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            Margin="1"
                                            HorizontalAlignment="Stretch"
                                            Foreground="{Binding Estado, Converter={StaticResource StateValueToColorConverter}}"
                                            FontSize="12"
                                            FontWeight="Bold"
                                            Text="{Binding Estado}"
                                            TextWrapping="Wrap" />
                                        <Rectangle Height="6" Style="{StaticResource EstiloRectanguloEnListas}" />
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <misControles:PaginarControl
						Grid.Row="2"
						Width="170"
						Background="{DynamicResource AccentColorBrush}"
						ComandoAnterior="{Binding ComandoNavegar}"
						ComandoSiguiente="{Binding ComandoNavegar}"
						NumeroPagina="{Binding NumeroPagina, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						TotalPaginas="{Binding BusquedaOrdenesCompraProductoControl.TotalPagina}" />
                </Grid>
            </GroupBox>
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <GroupBox Header="Datos Generales de la Orden de Compra de Producto BIOMASA">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" MinHeight="30" />
                            <RowDefinition Height="Auto" MinHeight="30" />
                            <RowDefinition Height="Auto" MinHeight="30" />
                            <RowDefinition Height="Auto" MinHeight="30" />
                            <RowDefinition Height="Auto" MinHeight="30" />
                            <RowDefinition Height="Auto" MinHeight="30"/>
                            <RowDefinition Height="Auto" MinHeight="30"/>
                        </Grid.RowDefinitions>
                        <misControles:HeaderTextBlock
							Margin="5"
							Text="# Orden Compra Producto"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Column="1"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.OrdenCompraNo, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Margin="5"
                            Grid.Column="2"
                            Grid.Row="0"
							Text="# Exoneración DEI"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Column="3"
                            Grid.Row="0"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.NoExoneracionDEI, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
                            Grid.Row="1"
							Margin="5"
							Text="Nombre Empresa"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
                            Grid.Row="1"
							Grid.Column="1"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.NombrePlanta, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
                            Grid.Row="1"
                            Grid.Column="2"
							Margin="5"
							Text="Creado Por"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
                            Grid.Row="1"
							Grid.Column="3"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.CreadoPor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Grid.Row="2"
							Margin="5"
							Text="Fecha Creación"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="2"
							Grid.Column="1"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.FechaCreacion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Grid.Row="2"
                            Grid.Column="2"
							Margin="5"
							Text="Fecha Activación"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="2"
							Grid.Column="3"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.FechaActivacion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Grid.Row="3"
							Margin="5"
							Text="Es PO BIOMASA Actual"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="3"
							Grid.Column="1"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.EsOrdenCompraActual, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Grid.Row="3"
                            Grid.Column="2"
							Margin="5"
							Text="Tasa de Cambio"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="3"
							Grid.Column="3"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.ConversionDollarToLps, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Grid.Row="4"
							Margin="5"
							Text="$ Total"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="4"
							Grid.Column="1"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.MontoDollar, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}"/>
                        <misControles:HeaderTextBlock
							Grid.Row="4"
                            Grid.Column="2"
							Margin="5"
							Text="Lps Total"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="4"
							Grid.Column="3"
							Margin="5"
							Text="{Binding OrdenCompraProductoSeleccionada.MontoLPS, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" />
                        <misControles:HeaderTextBlock
							Grid.Row="5"
							Margin="5"
							Text="Cumplimiento Entrega"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="5"
							Grid.Column="1"
							Text="{Binding OrdenCompraProductoSeleccionada.PorcentajeCumplimiento, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0}%}" />
                        <misControles:HeaderTextBlock
							Grid.Row="5"
                            Grid.Column="2"
							Margin="5"
							Text="Estado"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="5"
							Grid.Column="3"
							Text="{Binding OrdenCompraProductoSeleccionada.Estado, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                        <misControles:HeaderTextBlock
							Grid.Row="6"
                            Grid.Column="0"
							Margin="5"
							Text="Fecha Cierre"
							TextWrapping="Wrap" />
                        <misControles:BodyTextBlock
							Grid.Row="6"
							Grid.Column="1"
							Text="{Binding OrdenCompraProductoSeleccionada.FechaCierre, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </Grid>
                </GroupBox>
                <TabControl Grid.Row="1">
                    <TabItem controlsMahApps:ControlsHelper.HeaderFontSize="16" Header="Detalle Producto Biomasa">
                        <Grid>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <DataGrid
									AutoGenerateColumns="False"
									IsReadOnly="True"
									ItemsSource="{Binding ListaOrdenesCompraProductoDetalle}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Binding="{Binding MaestroBiomasaDescripcion}" Header="Producto Biomasa" />
                                        <DataGridTextColumn Binding="{Binding Toneladas}" Header="Requerimiento (T)" />
                                        <DataGridTextColumn Binding="{Binding PrecioDollar, StringFormat=N2}" Header="$ Precio" />
                                        <DataGridTextColumn Binding="{Binding TotalDollares, StringFormat=N2}" Header="$ Total" />
                                        <DataGridTextColumn Binding="{Binding PrecioLPS, StringFormat=N2}" Header="Lps Precio" />
                                        <DataGridTextColumn Binding="{Binding TotalLps, StringFormat=N2}" Header="Lps Total" />
                                        <DataGridTextColumn Binding="{Binding ToneladasAsignadas, StringFormat=N2}" Header="Entregado (T)" />
                                        <DataGridTextColumn Binding="{Binding CumplimientoDetalleEntrega, StringFormat={}{0}%}" Header="% Cumplimiento" />
                                    </DataGrid.Columns>
                                </DataGrid>
                                <Grid Grid.Row="1" HorizontalAlignment="Right">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="130" />
                                    </Grid.ColumnDefinitions>
                                    <misControles:HeaderTextBlock Grid.Row="0"
                                                                  FontSize="16"
                                                                  Text="Total $" />
                                    <misControles:BodyTextBlock Grid.Row="0"
                                                               Grid.Column="1"
                                                               FontSize="16"
                                                               FontWeight="Bold"
                                                               Text="{Binding OrdenCompraProductoSeleccionada.TotalDetalleDollares,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged,
                                                                              StringFormat=N2}"
                                                               TextAlignment="Right" />
                                    <misControles:HeaderTextBlock Grid.Row="1"
                                                                  FontSize="16"
                                                                  Text="Total Lps" />
                                    <misControles:BodyTextBlock Grid.Row="1"
                                                                Grid.Column="1"
                                                                FontSize="16"
                                                                FontWeight="Bold"
                                                                Text="{Binding OrdenCompraProductoSeleccionada.TotalDetalleLps,
                                                                              Mode=TwoWay,
                                                                              UpdateSourceTrigger=PropertyChanged,
                                                                              StringFormat=N2}"
                                                               TextAlignment="Right" />
                                </Grid>
                            </Grid>
                        </Grid>
                    </TabItem>
                    <TabItem controlsMahApps:ControlsHelper.HeaderFontSize="16" Header="Detalle Boletas">
                        <Grid>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <DataGrid
									AutoGenerateColumns="False"
									IsReadOnly="True"
									ItemsSource="{Binding ListaOrdenesCompraDetalleBoletas}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Binding="{Binding CodigoBoleta}" Header="Código Boleta" />
                                        <DataGridTextColumn Binding="{Binding CantidadFacturada}" Header="Toneladas" />
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
        </Grid>
        <misControles:AppBarPanel Grid.Row="1" Background="{DynamicResource AccentColorBrush}">
            <misControles:AppBarButton
				Command="{Binding ComandoMostrarAgregar}"
				Imagen="{DynamicResource AgregarPathImagen}"
				Titulo="Crear PO Biomasa" />
            <misControles:AppBarButton
				Command="{Binding ComandoMostrarEditar}"
				Imagen="{DynamicResource EditarPathImagen}"
				Titulo="Editar PO Biomasa" />
            <misControles:AppBarButton
				Command="{Binding ComandoEliminar}"
				Imagen="{DynamicResource EliminarPathImagen}"
				Titulo="Eliminar PO Biomasa" />
            <misControles:Separador />
            <misControles:AppBarButton
				Command="{Binding ComandoDetalleBiomasa}"
				Imagen="{DynamicResource DetallePOBiomasaPathImagen}"
				Titulo="Detalle Biomasa" />
            <misControles:Separador />
            <misControles:AppBarButton
				Command="{Binding ComandoActivarPO}"
				Imagen="{DynamicResource ActivarPOBiomasaPathImagen}"
				Titulo="Activar PO Biomasa" />
            <misControles:Separador />
            <misControles:AppBarButton
				Command="{Binding ComandoCerrarPO}"
				Imagen="{DynamicResource CerrarPOBiomasaPathImagen}"
				Titulo="Cerrar PO Biomasa" />
            <misControles:Separador />
            <misControles:AppBarButton
				Command="{Binding ComandoImprimirDetallePO}"
				Imagen="{DynamicResource ImprimirPathImagen}"
				Titulo="Imprimir Detalle PO" />
            <misControles:Separador />
            <misControles:AppBarButton
				Command="{Binding ComandoRefrescar}"
				Imagen="{DynamicResource RefrescarPathImagen}"
				Titulo="Actualizar" Click="AppBarButton_Click" />
        </misControles:AppBarPanel>

        <Border Grid.RowSpan="2" Visibility="{Binding MostrarVentanaEsperaPrincipal}" d:IsHidden="True">
            <Grid>
                <misControles:BloqueoPanel/>
                <controlsMahApps:ProgressRing IsActive="True" IsLarge="False"/>
            </Grid>
        </Border>
    </Grid>
</wpfCoreWindow:MetroWindowExt>